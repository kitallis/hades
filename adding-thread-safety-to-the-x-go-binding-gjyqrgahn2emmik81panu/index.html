<!DOCTYPE html>
<html lang="en">
  
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Adding Thread Safety to the X Go Binding &middot; Planet of the Crabs</title>
    <meta name="description" content="ðŸ¦€ fearless rust" />
    <link rel="shortcut icon"  href="https://kitallis.github.io/hades/favicon.ico" />
    <link rel="alternate" type="application/atom+xml" title="RSS" href="https://kitallis.github.io/hades/atom.xml">

    <style>html,body{background:#fffaf7;color:#2d2d2d;font:16px/1.5 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"}a,a:visited{color:darkred;text-decoration:none}a:hover{text-decoration:underline}main{margin:auto;max-width:60rem;padding:0.8rem}pre{background:white;overflow:scroll;padding:1rem}td{border:1px solid #2d2d2d;padding:10px}img{height:auto;max-width:100%}.homepage-list{list-style:none;padding:1rem 0}.homepage-list li{align-items:center;display:flex;flex-wrap:wrap;justify-content:space-between;margin-bottom:10px}@media (max-width: 38rem){.homepage-list li a{width:100%}}
</style>

    <meta property="og:site_name" content="Planet of the Crabs">
      
      <meta property="og:title" content="Adding Thread Safety to the X Go Binding">
      <meta property="og:description" content="">
      <meta property="og:url" content="https://kitallis.github.io/hades/adding-thread-safety-to-the-x-go-binding-gjyqrgahn2emmik81panu/">
      <meta property="og:image" content="">

      <meta property="og:type" content="article" />
        <meta property="article:published_time" content="2012-04-21T20:52:00-05:00" />

      <link rel="prev" href="https://kitallis.github.io/hades/dynamic-desktop-workspaces-vlrogowexy5utlu4-o22d/" />
      <link rel="next" href="https://kitallis.github.io/hades/daemonizing-go-programs-with-a-bsd-style-rc-d-example-wblfpwbrmvc-camevg9/" />
    

  </head>
  

  <body>
    <main id="main" role="main">

      
      <header role="banner">
        <h3 style="margin-top:0;">
          <a href="https://kitallis.github.io/hades/" title="Home">Planet of the Crabs</a>
          <br /><small>ðŸ¦€ fearless rust</small>
        </h3>
      </header>
      <hr />
      

      
<article>
  <h1>Adding Thread Safety to the X Go Binding</h1>

  
    <p style="font-size:90%;">
      Posted on <time datetime="2012-04-21T20:52:00-05:00">April 21, 2012</time>
      by <a href="https:&#x2F;&#x2F;blog.burntsushi.net&#x2F;thread-safety-x-go-binding&#x2F;">Andrew Gallant: BurntSushi</a>

    </p>
  

  <p>The <a href="http://code.google.com/p/x-go-binding/">X Go Binding (XGB)</a> is a low level
library that provides an API to interact with running X servers. One can only
communicate with an X server by sending data over a network connection;
protocol requests, replies and errors need to be perfectly constructed down to
the last byte. Xlib did precisely this, and then some. As a result, Xlib became
huge and difficult to maintain.</p>
<p>In recent years, the <a href="http://xcb.freedesktop.org/">XCB project</a> made things a
bit more civilized by generating C code from <a href="http://cgit.freedesktop.org/xcb/proto/tree/src">XML
files</a> describing the X client
protocol using Python. While <a href="http://cgit.freedesktop.org/xcb/libxcb/tree/src/c_client.py">the Python to generate said
code</a> is no walk
in the park, it is typically preferred to the alternative: keeping the X core
protocol up to date along with any number of extensions that exist as well.
(There are other benefits to XCB, like easier asynchronicity, but that is
beyond the scope of this post.)</p>
<p>XGB proceeds in a similar vain; <a href="http://code.google.com/r/jamslam-x-go-binding/source/browse/xgb/go_client.py">Python is used to generate Go
code</a>
that provides an API to interact with the X protocol. Unlike its sister project
XCB, it is not thread safe. In particular, if X requests are made in parallel,
the best case scenario is a jumbled request or reply and the worst case
scenario is an X server crash. Parallel requests can be particularly useful
when images are being sent to the X server to be painted on the screen; other
useful work could be done in the interim.</p>
</article>


      <nav class="pagination">
        
        
      </nav>

      
      <footer role="contentinfo">
        <hr />
        
        
        <small>Built with <a href="https://www.getzola.org/">Zola</a>.<br />
          Maintained with &hearts; for the web.<br />
          
        </small>
        
      </footer>
      

    </main>
    
    
  </body>
</html>

