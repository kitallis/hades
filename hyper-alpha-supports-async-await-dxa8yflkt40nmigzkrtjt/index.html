<!DOCTYPE html>
<html lang="en">
  
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>hyper alpha supports async&#x2F;await &middot; Planet of the Crabs</title>
    <meta name="description" content="ðŸ¦€ fearless rust" />
    <link rel="shortcut icon"  href="https://kitallis.github.io/hades/favicon.ico" />
    <link rel="alternate" type="application/atom+xml" title="RSS" href="https://kitallis.github.io/hades/atom.xml">

    <style>html,body{background:#fffaf7;color:#2d2d2d;font:16px/1.5 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"}a,a:visited{color:darkred;text-decoration:none}a:hover{text-decoration:underline}main{margin:auto;max-width:60rem;padding:0.8rem}pre{background:white;overflow:scroll;padding:1rem}td{border:1px solid #2d2d2d;padding:10px}img{height:auto;max-width:100%}.homepage-list{list-style:none;padding:1rem 0}.homepage-list li{align-items:center;display:flex;flex-wrap:wrap;justify-content:space-between;margin-bottom:10px}@media (max-width: 38rem){.homepage-list li a{width:100%}}
</style>

    <meta property="og:site_name" content="Planet of the Crabs">
      
      <meta property="og:title" content="hyper alpha supports async&#x2F;await">
      <meta property="og:description" content="">
      <meta property="og:url" content="https://kitallis.github.io/hades/hyper-alpha-supports-async-await-dxa8yflkt40nmigzkrtjt/">
      <meta property="og:image" content="">

      <meta property="og:type" content="article" />
        <meta property="article:published_time" content="2019-09-04T11:53:52-07:00" />

      <link rel="prev" href="https://kitallis.github.io/hades/criterion-rs-v0-3-custom-measurements-profiling-hooks-custom-test-framework-api-changes-glvmcqcusuz62bmdcskgi/" />
      <link rel="next" href="https://kitallis.github.io/hades/reqwest-alpha-await-9ulnhgeq4q4w4eiobdowp/" />
    

  </head>
  

  <body>
    <main id="main" role="main">

      
      <header role="banner">
        <h3 style="margin-top:0;">
          <a href="https://kitallis.github.io/hades/" title="Home">Planet of the Crabs</a>
          <br /><small>ðŸ¦€ fearless rust</small>
        </h3>
      </header>
      <hr />
      

      
<article>
  <h1>hyper alpha supports async&#x2F;await</h1>

  
    <p style="font-size:90%;">
      Posted on <time datetime="2019-09-04T11:53:52-07:00">September 04, 2019</time>
      by <a href="https:&#x2F;&#x2F;seanmonstar.com&#x2F;post&#x2F;187493499882">Sean McArthur : seanmonstar</a>

    </p>
  

  <p>I&rsquo;m excited to announce the <a href="https://github.com/hyperium/hyper/releases/tag/v0.13.0-alpha.1">first alpha</a> of hyper 0.13. <a href="https://hyper.rs">hyper</a> is a maturing HTTP library written in Rust, already one of the fastest out there, and trusted by many for its correctness.</p>
<p>This alpha release brings support for the new <a href="https://doc.rust-lang.org/std/future/trait.Future.html"><code>std::future::Future</code></a>. The reason this is so exciting is that this allows using the new <code>async</code>/<code>await</code> syntax that will be stabilizing in Rust 1.39.</p>
<h3>Example</h3>
<p>The follow example shows how one can use <code>async</code>/<code>await</code> to dump a response to the console:</p>
<pre><code class="rust">#[tokio::main]
async fn main() -&gt; Result&lt;(), Error&gt; {
    let client = Client::new();

    let resp = client.get("http://httpbin.org/ip".parse()?).await?;
    println!("Status: {}", resp.status());
    println!("Headers: {:#?}\n", resp.headers());

    while let Some(chunk) = resp.body_mut().next().await {
        stdout().write_all(&amp;chunk?)?;
    }

    Ok(())
}
</code></pre>
<p>The same <code>async</code>/<code>await</code> style can be used for writing servers as well!</p>
<h3>Changes to come</h3>
<p>Besides the change from <code>futures</code> 0.1 to <code>std::future::Future</code> and how writing code with <code>async</code>/<code>await</code>, much of hyper&rsquo;s API will feel very similar. Still, there a some technically breaking changes that will be included in the 0.13 as well.</p>
<h3>Embracing <code>tower::Service</code></h3>
<p>During hyper 0.12, servers were defined via the <code>hyper::service::Service</code> trait. Since then, we&rsquo;ve been working hard on a general <code>Service</code> interface, and building <a href="https://github.com/tower-rs/tower">powerful middleware</a> that can utilize it. Our hope is that eventually, applications can be generic over <a href="https://docs.rs/tower-service/0.3.0-alpha.1/tower_service/trait.Service.html"><code>Service</code></a> and the <code>http</code> types, and a user could choose their backend that plugs right in (such as hyper).</p>
<p>Consider a small example that handles many mundane things for you:</p>
<pre><code class="rust">let svc = ServiceBuilder::new()
    // Reject the request early if concurrency limit is hit
    .load_shed()
    // Only allow 1,000 requests in flight at a time
    .concurrency_limit(1_000)
    // Cancel requests that hang too long
    .timeout(Duration::from_secs(30))
    // All wrapped around your application logic
    .service(your_app_service);
</code></pre>
<p>The <code>tower::Service</code> trait easily allows everyone to power up their servers and clients!</p>
<h3>Alpha One</h3>
<p>This first alpha is to allow people to try out writing HTTP servers and clients using the new <code>async</code>/<code>await</code> syntax. All the features from 0.12 work in this release. However, not all the API changes have been finalized, so as with other alphas, there will likely be breakage between alpha releases as we fine tune things.</p>
<p>But for now, get your fresh copy of hyper <a href="https://github.com/hyperium/hyper/releases/tag/v0.13.0-alpha.1">v0.13.0-alpha.1 here</a>!</p>
<pre><code class="toml">[dependencies]
hyper = "=0.13.0-alpha.1"
</code></pre>
</article>


      <nav class="pagination">
        
        
      </nav>

      
      <footer role="contentinfo">
        <hr />
        
        
        <small>Built with <a href="https://www.getzola.org/">Zola</a>.<br />
          Maintained with &hearts; for the web.<br />
          
        </small>
        
      </footer>
      

    </main>
    
    
  </body>
</html>

